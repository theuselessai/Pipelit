<!DOCTYPE html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Visual workflow automation platform for building LLM-powered agents"><link href=https://theuselessai.github.io/Pipelit/architecture/execution-engine/ rel=canonical><link href=../backend/ rel=prev><link href=../node-io/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Execution Engine - Pipelit</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../../assets/stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><link href=../../assets/stylesheets/glightbox.min.css rel=stylesheet><script src=../../assets/javascripts/glightbox.min.js></script><style id=glightbox-style>
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=deep-purple data-md-color-accent=amber> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#execution-engine class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=Pipelit class="md-header__button md-logo" aria-label=Pipelit data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Pipelit </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Execution Engine </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=deep-purple data-md-color-accent=amber aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=deep-purple data-md-color-accent=amber aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/theuselessai/Pipelit title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class=md-source__repository> theuselessai/Pipelit </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class=md-tabs__item> <a href=../../concepts/ class=md-tabs__link> Concepts </a> </li> <li class=md-tabs__item> <a href=../../tutorials/ class=md-tabs__link> Tutorials </a> </li> <li class=md-tabs__item> <a href=../../components/ class=md-tabs__link> Components </a> </li> <li class=md-tabs__item> <a href=../../api/ class=md-tabs__link> API Reference </a> </li> <li class=md-tabs__item> <a href=../../frontend/ class=md-tabs__link> Frontend Guide </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../ class=md-tabs__link> Architecture </a> </li> <li class=md-tabs__item> <a href=../../deployment/ class=md-tabs__link> Deployment </a> </li> <li class=md-tabs__item> <a href=../../contributing/ class=md-tabs__link> Contributing </a> </li> <li class=md-tabs__item> <a href=../../faq/ class=md-tabs__link> FAQ </a> </li> <li class=md-tabs__item> <a href=../../troubleshooting/ class=md-tabs__link> Troubleshooting </a> </li> <li class=md-tabs__item> <a href=../../changelog/ class=md-tabs__link> Changelog </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=Pipelit class="md-nav__button md-logo" aria-label=Pipelit data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg> </a> Pipelit </label> <div class=md-nav__source> <a href=https://github.com/theuselessai/Pipelit title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg> </div> <div class=md-source__repository> theuselessai/Pipelit </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/first-run/ class=md-nav__link> <span class=md-ellipsis> First Run </span> </a> </li> <li class=md-nav__item> <a href=../../getting-started/quickstart-tutorial/ class=md-nav__link> <span class=md-ellipsis> Quickstart Tutorial </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../concepts/ class=md-nav__link> <span class=md-ellipsis> Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/workflows/ class=md-nav__link> <span class=md-ellipsis> Workflows </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/nodes-and-edges/ class=md-nav__link> <span class=md-ellipsis> Nodes &amp; Edges </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/triggers/ class=md-nav__link> <span class=md-ellipsis> Triggers </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/agents/ class=md-nav__link> <span class=md-ellipsis> Agents </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/tools/ class=md-nav__link> <span class=md-ellipsis> Tools </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/expressions/ class=md-nav__link> <span class=md-ellipsis> Expressions </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/execution/ class=md-nav__link> <span class=md-ellipsis> Execution </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/memory/ class=md-nav__link> <span class=md-ellipsis> Memory </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/epics-and-tasks/ class=md-nav__link> <span class=md-ellipsis> Epics &amp; Tasks </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/cost-tracking/ class=md-nav__link> <span class=md-ellipsis> Cost Tracking </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/scheduler/ class=md-nav__link> <span class=md-ellipsis> Scheduler </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Tutorials </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tutorials/ class=md-nav__link> <span class=md-ellipsis> Tutorials </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/chat-agent/ class=md-nav__link> <span class=md-ellipsis> Chat Agent </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/telegram-bot/ class=md-nav__link> <span class=md-ellipsis> Telegram Bot </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/conditional-routing/ class=md-nav__link> <span class=md-ellipsis> Conditional Routing </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/scheduled-workflow/ class=md-nav__link> <span class=md-ellipsis> Scheduled Workflow </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/multi-agent/ class=md-nav__link> <span class=md-ellipsis> Multi-Agent </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/self-improving-agent/ class=md-nav__link> <span class=md-ellipsis> Self-Improving Agent </span> </a> </li> <li class=md-nav__item> <a href=../../tutorials/yaml-dsl/ class=md-nav__link> <span class=md-ellipsis> YAML DSL </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Components </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Components </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../components/ class=md-nav__link> <span class=md-ellipsis> Components </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> Triggers </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> Triggers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../components/triggers/ class=md-nav__link> <span class=md-ellipsis> Triggers </span> </a> </li> <li class=md-nav__item> <a href=../../components/triggers/chat/ class=md-nav__link> <span class=md-ellipsis> Chat </span> </a> </li> <li class=md-nav__item> <a href=../../components/triggers/telegram/ class=md-nav__link> <span class=md-ellipsis> Telegram </span> </a> </li> <li class=md-nav__item> <a href=../../components/triggers/manual/ class=md-nav__link> <span class=md-ellipsis> Manual </span> </a> </li> <li class=md-nav__item> <a href=../../components/triggers/schedule/ class=md-nav__link> <span class=md-ellipsis> Schedule </span> </a> </li> <li class=md-nav__item> <a href=../../components/triggers/workflow/ class=md-nav__link> <span class=md-ellipsis> Workflow </span> </a> </li> <li class=md-nav__item> <a href=../../components/triggers/error/ class=md-nav__link> <span class=md-ellipsis> Error </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> <span class=md-ellipsis> AI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> AI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../components/ai/ class=md-nav__link> <span class=md-ellipsis> AI Components </span> </a> </li> <li class=md-nav__item> <a href=../../components/ai/agent/ class=md-nav__link> <span class=md-ellipsis> Agent </span> </a> </li> <li class=md-nav__item> <a href=../../components/ai/categorizer/ class=md-nav__link> <span class=md-ellipsis> Categorizer </span> </a> </li> <li class=md-nav__item> <a href=../../components/ai/router/ class=md-nav__link> <span class=md-ellipsis> Router </span> </a> </li> <li class=md-nav__item> <a href=../../components/ai/extractor/ class=md-nav__link> <span class=md-ellipsis> Extractor </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> <span class=md-ellipsis> Tools </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Tools </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../components/tools/ class=md-nav__link> <span class=md-ellipsis> Tools </span> </a> </li> <li class=md-nav__item> <a href=../../components/tools/run-command/ class=md-nav__link> <span class=md-ellipsis> Run Command </span> </a> </li> <li class=md-nav__item> <a href=../../components/tools/http-request/ class=md-nav__link> <span class=md-ellipsis> HTTP Request </span> </a> </li> <li class=md-nav__item> <a href=../../components/tools/web-search/ class=md-nav__link> <span class=md-ellipsis> Web Search </span> </a> </li> <li class=md-nav__item> <a href=../../components/tools/calculator/ class=md-nav__link> <span class=md-ellipsis> Calculator </span> </a> </li> <li class=md-nav__item> <a href=../../components/tools/datetime/ class=md-nav__link> <span class=md-ellipsis> Date &amp; Time </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex=0> <span class=md-ellipsis> Self-Awareness </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> Self-Awareness </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../components/self-awareness/ class=md-nav__link> <span class=md-ellipsis> Self-Awareness </span> </a> </li> <li class=md-nav__item> <a href=../../components/self-awareness/create-agent-user/ class=md-nav__link> <span class=md-ellipsis> Create Agent User </span> </a> </li> <li class=md-nav__item> <a href=../../components/self-awareness/platform-api/ class=md-nav__link> <span class=md-ellipsis> Platform API </span> </a> </li> <li class=md-nav__item> <a href=../../components/self-awareness/whoami/ class=md-nav__link> <span class=md-ellipsis> WhoAmI </span> </a> </li> <li class=md-nav__item> <a href=../../components/self-awareness/get-totp-code/ class=md-nav__link> <span class=md-ellipsis> Get TOTP Code </span> </a> </li> <li class=md-nav__item> <a href=../../components/self-awareness/epic-tools/ class=md-nav__link> <span class=md-ellipsis> Epic Tools </span> </a> </li> <li class=md-nav__item> <a href=../../components/self-awareness/task-tools/ class=md-nav__link> <span class=md-ellipsis> Task Tools </span> </a> </li> <li class=md-nav__item> <a href=../../components/self-awareness/spawn-and-await/ class=md-nav__link> <span class=md-ellipsis> Spawn &amp; Await </span> </a> </li> <li class=md-nav__item> <a href=../../components/self-awareness/workflow-create/ class=md-nav__link> <span class=md-ellipsis> Workflow Create </span> </a> </li> <li class=md-nav__item> <a href=../../components/self-awareness/workflow-discover/ class=md-nav__link> <span class=md-ellipsis> Workflow Discover </span> </a> </li> <li class=md-nav__item> <a href=../../components/self-awareness/scheduler-tools/ class=md-nav__link> <span class=md-ellipsis> Scheduler Tools </span> </a> </li> <li class=md-nav__item> <a href=../../components/self-awareness/system-health/ class=md-nav__link> <span class=md-ellipsis> System Health </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6 id=__nav_5_6_label tabindex=0> <span class=md-ellipsis> Memory </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_6_label aria-expanded=false> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> Memory </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../components/memory/ class=md-nav__link> <span class=md-ellipsis> Memory </span> </a> </li> <li class=md-nav__item> <a href=../../components/memory/memory-read/ class=md-nav__link> <span class=md-ellipsis> Memory Read </span> </a> </li> <li class=md-nav__item> <a href=../../components/memory/memory-write/ class=md-nav__link> <span class=md-ellipsis> Memory Write </span> </a> </li> <li class=md-nav__item> <a href=../../components/memory/identify-user/ class=md-nav__link> <span class=md-ellipsis> Identify User </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_7> <label class=md-nav__link for=__nav_5_7 id=__nav_5_7_label tabindex=0> <span class=md-ellipsis> Logic </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_7_label aria-expanded=false> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> Logic </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../components/logic/ class=md-nav__link> <span class=md-ellipsis> Logic </span> </a> </li> <li class=md-nav__item> <a href=../../components/logic/switch/ class=md-nav__link> <span class=md-ellipsis> Switch </span> </a> </li> <li class=md-nav__item> <a href=../../components/logic/code/ class=md-nav__link> <span class=md-ellipsis> Code </span> </a> </li> <li class=md-nav__item> <a href=../../components/logic/merge/ class=md-nav__link> <span class=md-ellipsis> Merge </span> </a> </li> <li class=md-nav__item> <a href=../../components/logic/filter/ class=md-nav__link> <span class=md-ellipsis> Filter </span> </a> </li> <li class=md-nav__item> <a href=../../components/logic/loop/ class=md-nav__link> <span class=md-ellipsis> Loop </span> </a> </li> <li class=md-nav__item> <a href=../../components/logic/wait/ class=md-nav__link> <span class=md-ellipsis> Wait </span> </a> </li> <li class=md-nav__item> <a href=../../components/logic/human-confirmation/ class=md-nav__link> <span class=md-ellipsis> Human Confirmation </span> </a> </li> <li class=md-nav__item> <a href=../../components/logic/aggregator/ class=md-nav__link> <span class=md-ellipsis> Aggregator </span> </a> </li> <li class=md-nav__item> <a href=../../components/logic/subworkflow/ class=md-nav__link> <span class=md-ellipsis> Subworkflow </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5_8> <label class=md-nav__link for=__nav_5_8 id=__nav_5_8_label tabindex=0> <span class=md-ellipsis> Sub-Components </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_8_label aria-expanded=false> <label class=md-nav__title for=__nav_5_8> <span class="md-nav__icon md-icon"></span> Sub-Components </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../components/sub-components/ class=md-nav__link> <span class=md-ellipsis> Sub-Components </span> </a> </li> <li class=md-nav__item> <a href=../../components/sub-components/ai-model/ class=md-nav__link> <span class=md-ellipsis> AI Model </span> </a> </li> <li class=md-nav__item> <a href=../../components/sub-components/output-parser/ class=md-nav__link> <span class=md-ellipsis> Output Parser </span> </a> </li> <li class=md-nav__item> <a href=../../components/sub-components/code-execute/ class=md-nav__link> <span class=md-ellipsis> Code Execute </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> API Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../api/ class=md-nav__link> <span class=md-ellipsis> API Reference </span> </a> </li> <li class=md-nav__item> <a href=../../api/auth/ class=md-nav__link> <span class=md-ellipsis> Authentication </span> </a> </li> <li class=md-nav__item> <a href=../../api/workflows/ class=md-nav__link> <span class=md-ellipsis> Workflows </span> </a> </li> <li class=md-nav__item> <a href=../../api/nodes/ class=md-nav__link> <span class=md-ellipsis> Nodes </span> </a> </li> <li class=md-nav__item> <a href=../../api/edges/ class=md-nav__link> <span class=md-ellipsis> Edges </span> </a> </li> <li class=md-nav__item> <a href=../../api/executions/ class=md-nav__link> <span class=md-ellipsis> Executions </span> </a> </li> <li class=md-nav__item> <a href=../../api/chat/ class=md-nav__link> <span class=md-ellipsis> Chat </span> </a> </li> <li class=md-nav__item> <a href=../../api/credentials/ class=md-nav__link> <span class=md-ellipsis> Credentials </span> </a> </li> <li class=md-nav__item> <a href=../../api/schedules/ class=md-nav__link> <span class=md-ellipsis> Schedules </span> </a> </li> <li class=md-nav__item> <a href=../../api/memory-api/ class=md-nav__link> <span class=md-ellipsis> Memory </span> </a> </li> <li class=md-nav__item> <a href=../../api/epics/ class=md-nav__link> <span class=md-ellipsis> Epics </span> </a> </li> <li class=md-nav__item> <a href=../../api/tasks/ class=md-nav__link> <span class=md-ellipsis> Tasks </span> </a> </li> <li class=md-nav__item> <a href=../../api/users/ class=md-nav__link> <span class=md-ellipsis> Users </span> </a> </li> <li class=md-nav__item> <a href=../../api/websocket/ class=md-nav__link> <span class=md-ellipsis> WebSocket </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Frontend Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Frontend Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../frontend/ class=md-nav__link> <span class=md-ellipsis> Frontend Guide </span> </a> </li> <li class=md-nav__item> <a href=../../frontend/dashboard/ class=md-nav__link> <span class=md-ellipsis> Dashboard </span> </a> </li> <li class=md-nav__item> <a href=../../frontend/editor/ class=md-nav__link> <span class=md-ellipsis> Workflow Editor </span> </a> </li> <li class=md-nav__item> <a href=../../frontend/executions-ui/ class=md-nav__link> <span class=md-ellipsis> Executions </span> </a> </li> <li class=md-nav__item> <a href=../../frontend/credentials-ui/ class=md-nav__link> <span class=md-ellipsis> Credentials </span> </a> </li> <li class=md-nav__item> <a href=../../frontend/memories-ui/ class=md-nav__link> <span class=md-ellipsis> Memories </span> </a> </li> <li class=md-nav__item> <a href=../../frontend/epics-ui/ class=md-nav__link> <span class=md-ellipsis> Epics </span> </a> </li> <li class=md-nav__item> <a href=../../frontend/settings-ui/ class=md-nav__link> <span class=md-ellipsis> Settings </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8 checked> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex> <span class=md-ellipsis> Architecture </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=true> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Architecture </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=../system-overview/ class=md-nav__link> <span class=md-ellipsis> System Overview </span> </a> </li> <li class=md-nav__item> <a href=../backend/ class=md-nav__link> <span class=md-ellipsis> Backend </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Execution Engine </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Execution Engine </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#execution-pipeline-overview class=md-nav__link> <span class=md-ellipsis> Execution Pipeline Overview </span> </a> </li> <li class=md-nav__item> <a href=#builder-servicesbuilderpy class=md-nav__link> <span class=md-ellipsis> Builder (services/builder.py) </span> </a> <nav class=md-nav aria-label="Builder (services/builder.py)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#trigger-scoped-compilation class=md-nav__link> <span class=md-ellipsis> Trigger-Scoped Compilation </span> </a> </li> <li class=md-nav__item> <a href=#compilation-steps class=md-nav__link> <span class=md-ellipsis> Compilation Steps </span> </a> </li> <li class=md-nav__item> <a href=#graph-caching class=md-nav__link> <span class=md-ellipsis> Graph Caching </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#topology-analyzer-servicestopologypy class=md-nav__link> <span class=md-ellipsis> Topology Analyzer (services/topology.py) </span> </a> </li> <li class=md-nav__item> <a href=#orchestrator-servicesorchestratorpy class=md-nav__link> <span class=md-ellipsis> Orchestrator (services/orchestrator.py) </span> </a> <nav class=md-nav aria-label="Orchestrator (services/orchestrator.py)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#execution-lifecycle class=md-nav__link> <span class=md-ellipsis> Execution Lifecycle </span> </a> </li> <li class=md-nav__item> <a href=#state-management class=md-nav__link> <span class=md-ellipsis> State Management </span> </a> </li> <li class=md-nav__item> <a href=#subworkflow-handling class=md-nav__link> <span class=md-ellipsis> Subworkflow Handling </span> </a> </li> <li class=md-nav__item> <a href=#error-handling class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#expression-resolver-servicesexpressionspy class=md-nav__link> <span class=md-ellipsis> Expression Resolver (services/expressions.py) </span> </a> <nav class=md-nav aria-label="Expression Resolver (services/expressions.py)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#template-syntax class=md-nav__link> <span class=md-ellipsis> Template Syntax </span> </a> </li> <li class=md-nav__item> <a href=#context-variables class=md-nav__link> <span class=md-ellipsis> Context Variables </span> </a> </li> <li class=md-nav__item> <a href=#jinja2-features class=md-nav__link> <span class=md-ellipsis> Jinja2 Features </span> </a> </li> <li class=md-nav__item> <a href=#frontend-integration class=md-nav__link> <span class=md-ellipsis> Frontend Integration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#executor-servicesexecutorpy class=md-nav__link> <span class=md-ellipsis> Executor (services/executor.py) </span> </a> <nav class=md-nav aria-label="Executor (services/executor.py)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#rq-job-wrappers class=md-nav__link> <span class=md-ellipsis> RQ Job Wrappers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#state-model-servicesstatepy class=md-nav__link> <span class=md-ellipsis> State Model (services/state.py) </span> </a> </li> <li class=md-nav__item> <a href=#component-output-convention class=md-nav__link> <span class=md-ellipsis> Component Output Convention </span> </a> <nav class=md-nav aria-label="Component Output Convention"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reserved-underscore-keys class=md-nav__link> <span class=md-ellipsis> Reserved Underscore Keys </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conditional-routing class=md-nav__link> <span class=md-ellipsis> Conditional Routing </span> </a> <nav class=md-nav aria-label="Conditional Routing"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#switch-node class=md-nav__link> <span class=md-ellipsis> Switch Node </span> </a> </li> <li class=md-nav__item> <a href=#per-edge-condition-values class=md-nav__link> <span class=md-ellipsis> Per-Edge Condition Values </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../node-io/ class=md-nav__link> <span class=md-ellipsis> Node I/O </span> </a> </li> <li class=md-nav__item> <a href=../websocket-system/ class=md-nav__link> <span class=md-ellipsis> WebSocket System </span> </a> </li> <li class=md-nav__item> <a href=../context-management/ class=md-nav__link> <span class=md-ellipsis> Context Management </span> </a> </li> <li class=md-nav__item> <a href=../multi-agent/ class=md-nav__link> <span class=md-ellipsis> Multi-Agent </span> </a> </li> <li class=md-nav__item> <a href=../workflow-dsl/ class=md-nav__link> <span class=md-ellipsis> Workflow DSL </span> </a> </li> <li class=md-nav__item> <a href=../self-improving/ class=md-nav__link> <span class=md-ellipsis> Self-Improving </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Deployment </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../deployment/ class=md-nav__link> <span class=md-ellipsis> Deployment </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/docker/ class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/production/ class=md-nav__link> <span class=md-ellipsis> Production </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/redis/ class=md-nav__link> <span class=md-ellipsis> Redis </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/reverse-proxy/ class=md-nav__link> <span class=md-ellipsis> Reverse Proxy </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/environment/ class=md-nav__link> <span class=md-ellipsis> Environment Variables </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/database/ class=md-nav__link> <span class=md-ellipsis> Database </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10 id=__nav_10_label tabindex=0> <span class=md-ellipsis> Contributing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Contributing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../../contributing/development-setup/ class=md-nav__link> <span class=md-ellipsis> Development Setup </span> </a> </li> <li class=md-nav__item> <a href=../../contributing/testing/ class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=../../contributing/adding-components/ class=md-nav__link> <span class=md-ellipsis> Adding Components </span> </a> </li> <li class=md-nav__item> <a href=../../contributing/migrations/ class=md-nav__link> <span class=md-ellipsis> Migrations </span> </a> </li> <li class=md-nav__item> <a href=../../contributing/code-style/ class=md-nav__link> <span class=md-ellipsis> Code Style </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../../troubleshooting/ class=md-nav__link> <span class=md-ellipsis> Troubleshooting </span> </a> </li> <li class=md-nav__item> <a href=../../changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#execution-pipeline-overview class=md-nav__link> <span class=md-ellipsis> Execution Pipeline Overview </span> </a> </li> <li class=md-nav__item> <a href=#builder-servicesbuilderpy class=md-nav__link> <span class=md-ellipsis> Builder (services/builder.py) </span> </a> <nav class=md-nav aria-label="Builder (services/builder.py)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#trigger-scoped-compilation class=md-nav__link> <span class=md-ellipsis> Trigger-Scoped Compilation </span> </a> </li> <li class=md-nav__item> <a href=#compilation-steps class=md-nav__link> <span class=md-ellipsis> Compilation Steps </span> </a> </li> <li class=md-nav__item> <a href=#graph-caching class=md-nav__link> <span class=md-ellipsis> Graph Caching </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#topology-analyzer-servicestopologypy class=md-nav__link> <span class=md-ellipsis> Topology Analyzer (services/topology.py) </span> </a> </li> <li class=md-nav__item> <a href=#orchestrator-servicesorchestratorpy class=md-nav__link> <span class=md-ellipsis> Orchestrator (services/orchestrator.py) </span> </a> <nav class=md-nav aria-label="Orchestrator (services/orchestrator.py)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#execution-lifecycle class=md-nav__link> <span class=md-ellipsis> Execution Lifecycle </span> </a> </li> <li class=md-nav__item> <a href=#state-management class=md-nav__link> <span class=md-ellipsis> State Management </span> </a> </li> <li class=md-nav__item> <a href=#subworkflow-handling class=md-nav__link> <span class=md-ellipsis> Subworkflow Handling </span> </a> </li> <li class=md-nav__item> <a href=#error-handling class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#expression-resolver-servicesexpressionspy class=md-nav__link> <span class=md-ellipsis> Expression Resolver (services/expressions.py) </span> </a> <nav class=md-nav aria-label="Expression Resolver (services/expressions.py)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#template-syntax class=md-nav__link> <span class=md-ellipsis> Template Syntax </span> </a> </li> <li class=md-nav__item> <a href=#context-variables class=md-nav__link> <span class=md-ellipsis> Context Variables </span> </a> </li> <li class=md-nav__item> <a href=#jinja2-features class=md-nav__link> <span class=md-ellipsis> Jinja2 Features </span> </a> </li> <li class=md-nav__item> <a href=#frontend-integration class=md-nav__link> <span class=md-ellipsis> Frontend Integration </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#executor-servicesexecutorpy class=md-nav__link> <span class=md-ellipsis> Executor (services/executor.py) </span> </a> <nav class=md-nav aria-label="Executor (services/executor.py)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#rq-job-wrappers class=md-nav__link> <span class=md-ellipsis> RQ Job Wrappers </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#state-model-servicesstatepy class=md-nav__link> <span class=md-ellipsis> State Model (services/state.py) </span> </a> </li> <li class=md-nav__item> <a href=#component-output-convention class=md-nav__link> <span class=md-ellipsis> Component Output Convention </span> </a> <nav class=md-nav aria-label="Component Output Convention"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#reserved-underscore-keys class=md-nav__link> <span class=md-ellipsis> Reserved Underscore Keys </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#conditional-routing class=md-nav__link> <span class=md-ellipsis> Conditional Routing </span> </a> <nav class=md-nav aria-label="Conditional Routing"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#switch-node class=md-nav__link> <span class=md-ellipsis> Switch Node </span> </a> </li> <li class=md-nav__item> <a href=#per-edge-condition-values class=md-nav__link> <span class=md-ellipsis> Per-Edge Condition Values </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=execution-engine>Execution Engine<a class=headerlink href=#execution-engine title="Permanent link">¶</a></h1> <p>The execution engine is the core of Pipelit's runtime. It compiles workflow graphs, resolves execution order, manages state, executes node components, and broadcasts real-time status events. This page covers each service in detail.</p> <h2 id=execution-pipeline-overview>Execution Pipeline Overview<a class=headerlink href=#execution-pipeline-overview title="Permanent link">¶</a></h2> <pre class=mermaid><code>sequenceDiagram
    participant Trigger as Trigger Handler
    participant RQ as RQ Worker
    participant Builder as Builder
    participant Topo as Topology
    participant Orch as Orchestrator
    participant Expr as Expression Resolver
    participant Comp as Component
    participant State as Redis State
    participant WS as WebSocket Broadcast

    Trigger-&gt;&gt;RQ: dispatch_event() -&gt; enqueue job
    RQ-&gt;&gt;Builder: build_graph(workflow, trigger_node)
    Builder-&gt;&gt;Topo: get_reachable_nodes(trigger_node)
    Topo--&gt;&gt;Builder: reachable node set
    Builder--&gt;&gt;RQ: CompiledGraph

    RQ-&gt;&gt;Orch: execute(execution, compiled_graph)
    Orch-&gt;&gt;State: Initialize execution state

    loop For each node in topological order
        Orch-&gt;&gt;WS: node_status: "running"
        Orch-&gt;&gt;Expr: resolve_expressions(node.config, state)
        Expr--&gt;&gt;Orch: resolved config
        Orch-&gt;&gt;Comp: execute_component(node, state)
        Comp--&gt;&gt;Orch: component output (flat dict)
        Orch-&gt;&gt;Orch: process output (wrap, side effects)
        Orch-&gt;&gt;State: store node_outputs[node_id]
        Orch-&gt;&gt;WS: node_status: "success" + output
    end

    Orch-&gt;&gt;State: Cleanup execution state
    Orch-&gt;&gt;WS: execution_completed</code></pre> <h2 id=builder-servicesbuilderpy>Builder (<code>services/builder.py</code>)<a class=headerlink href=#builder-servicesbuilderpy title="Permanent link">¶</a></h2> <p>The builder compiles a <code>Workflow</code> database model into a LangGraph <code>CompiledGraph</code>. This is the bridge between Pipelit's database representation and LangGraph's execution model.</p> <h3 id=trigger-scoped-compilation>Trigger-Scoped Compilation<a class=headerlink href=#trigger-scoped-compilation title="Permanent link">¶</a></h3> <p>When a trigger fires, the builder only compiles nodes <strong>reachable downstream</strong> from that specific trigger. This is a critical design decision:</p> <ul> <li>A single workflow can have multiple trigger branches (e.g., a chat trigger and a Telegram trigger feeding different agent chains)</li> <li>Unused nodes on the canvas do not cause build errors</li> <li>Each trigger activation produces a minimal, focused execution graph</li> </ul> <pre class=mermaid><code>graph LR
    subgraph "Full Workflow Canvas"
        TC[trigger_chat] --&gt; A1[agent_1]
        TT[trigger_telegram] --&gt; A2[agent_2]
        A2 --&gt; Code[code_1]
        Unused[unused_node]
    end

    subgraph "Compiled Graph (chat trigger fires)"
        TC2[trigger_chat] --&gt; A1b[agent_1]
    end</code></pre> <p>In this example, when the chat trigger fires, only <code>trigger_chat</code> and <code>agent_1</code> are compiled. <code>trigger_telegram</code>, <code>agent_2</code>, <code>code_1</code>, and <code>unused_node</code> are all excluded.</p> <h3 id=compilation-steps>Compilation Steps<a class=headerlink href=#compilation-steps title="Permanent link">¶</a></h3> <ol> <li><strong>Load</strong> workflow nodes and edges from the database</li> <li><strong>BFS reachability</strong> from the trigger node (via <code>topology.py</code>)</li> <li><strong>Filter</strong> nodes and edges to the reachable set</li> <li><strong>Resolve</strong> LLM configurations for AI-type nodes</li> <li><strong>Load</strong> tool factories for connected tool nodes</li> <li><strong>Build</strong> LangGraph state graph with node functions and edge routing</li> <li><strong>Compile</strong> and optionally cache the result in Redis</li> </ol> <h3 id=graph-caching>Graph Caching<a class=headerlink href=#graph-caching title="Permanent link">¶</a></h3> <p>Compiled graphs are cached in Redis keyed by workflow ID and a structural hash. The cache is invalidated whenever nodes or edges are modified (detected via WebSocket-broadcast mutations).</p> <h2 id=topology-analyzer-servicestopologypy>Topology Analyzer (<code>services/topology.py</code>)<a class=headerlink href=#topology-analyzer-servicestopologypy title="Permanent link">¶</a></h2> <p>The topology service provides BFS-based graph analysis:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=k>def</span><span class=w> </span><span class=nf>get_reachable_nodes</span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>    <span class=n>trigger_node_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>    <span class=n>edges</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=n>WorkflowEdge</span><span class=p>],</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>set</span><span class=p>[</span><span class=nb>str</span><span class=p>]:</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>    </span><span class=sd>"""BFS from trigger node following direct edges.</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=sd>    Returns the set of node_ids reachable downstream."""</span>
</span></code></pre></div> <p>This is used by the builder for trigger-scoped compilation and by the orchestrator to determine execution order.</p> <h2 id=orchestrator-servicesorchestratorpy>Orchestrator (<code>services/orchestrator.py</code>)<a class=headerlink href=#orchestrator-servicesorchestratorpy title="Permanent link">¶</a></h2> <p>The orchestrator is the execution engine's core. It walks through nodes in topological order, resolves template expressions, executes components, manages state, and broadcasts events.</p> <h3 id=execution-lifecycle>Execution Lifecycle<a class=headerlink href=#execution-lifecycle title="Permanent link">¶</a></h3> <p>For each node in the execution:</p> <ol> <li><strong>Status broadcast</strong> -- Publish <code>node_status: "pending"</code> then <code>"running"</code> via WebSocket</li> <li><strong>Expression resolution</strong> -- Resolve <code>{{ nodeId.portName }}</code> Jinja2 templates in <code>system_prompt</code> and <code>extra_config</code></li> <li><strong>Component execution</strong> -- Call the component factory to get the node function, then execute it</li> <li><strong>Output processing</strong> -- Process the component's return dict:<ul> <li>Non-underscore keys are wrapped into <code>node_outputs[node_id]</code></li> <li><code>_route</code> sets <code>state["route"]</code> for conditional routing</li> <li><code>_messages</code> are appended to <code>state["messages"]</code></li> <li><code>_state_patch</code> is merged into global state</li> </ul> </li> <li><strong>Result recording</strong> -- Wrap output in a <code>NodeResult</code> with status, data, error code, and metadata</li> <li><strong>State storage</strong> -- Store <code>node_outputs</code> and <code>node_results</code> in Redis</li> <li><strong>Status broadcast</strong> -- Publish <code>node_status: "success"</code> (with output) or <code>"failed"</code> (with error)</li> </ol> <h3 id=state-management>State Management<a class=headerlink href=#state-management title="Permanent link">¶</a></h3> <p>Execution state is stored in Redis during execution:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=n>state</span> <span class=o>=</span> <span class=p>{</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>    <span class=s2>"messages"</span><span class=p>:</span> <span class=p>[</span><span class=o>...</span><span class=p>],</span>              <span class=c1># LangGraph message list</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>    <span class=s2>"node_outputs"</span><span class=p>:</span> <span class=p>{</span>               <span class=c1># Per-node output data</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>        <span class=s2>"trigger_chat_abc"</span><span class=p>:</span> <span class=p>{</span><span class=s2>"text"</span><span class=p>:</span> <span class=s2>"hello"</span><span class=p>,</span> <span class=s2>"payload"</span><span class=p>:</span> <span class=p>{</span><span class=o>...</span><span class=p>}},</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>        <span class=s2>"agent_def"</span><span class=p>:</span> <span class=p>{</span><span class=s2>"output"</span><span class=p>:</span> <span class=s2>"response text"</span><span class=p>},</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>    <span class=p>},</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>    <span class=s2>"node_results"</span><span class=p>:</span> <span class=p>{</span>               <span class=c1># Per-node execution results</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>        <span class=s2>"trigger_chat_abc"</span><span class=p>:</span> <span class=n>NodeResult</span><span class=p>(</span><span class=n>status</span><span class=o>=</span><span class=s2>"success"</span><span class=p>,</span> <span class=o>...</span><span class=p>),</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>    <span class=p>},</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>    <span class=s2>"route"</span><span class=p>:</span> <span class=s2>"category_a"</span><span class=p>,</span>          <span class=c1># Current route for conditional edges</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>    <span class=s2>"execution_id"</span><span class=p>:</span> <span class=s2>"exec_xyz"</span><span class=p>,</span>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>    <span class=s2>"user_context"</span><span class=p>:</span> <span class=p>{</span><span class=o>...</span><span class=p>},</span>          <span class=c1># User info from trigger</span>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a><span class=p>}</span>
</span></code></pre></div> <h3 id=subworkflow-handling>Subworkflow Handling<a class=headerlink href=#subworkflow-handling title="Permanent link">¶</a></h3> <p>When a node returns <code>{"_subworkflow": {...}}</code>, the orchestrator:</p> <ol> <li>Creates a child <code>WorkflowExecution</code></li> <li>Enqueues the child execution as an RQ job</li> <li>Sets the parent node status to <code>"waiting"</code></li> <li>Releases the RQ worker (non-blocking)</li> <li>When the child completes, injects the result into <code>state["_subworkflow_results"]</code></li> <li>Re-enqueues the parent node for continuation</li> </ol> <h3 id=error-handling>Error Handling<a class=headerlink href=#error-handling title="Permanent link">¶</a></h3> <p>Failed nodes are wrapped in <code>NodeResult.failed()</code> with:</p> <ul> <li><code>error</code> -- Human-readable error message</li> <li><code>error_code</code> -- Machine-readable error classification</li> <li><code>metadata</code> -- Additional context (stack trace, timing)</li> </ul> <p>The orchestrator decides whether to skip downstream nodes or halt the entire execution based on the error severity and the node's position in the graph.</p> <h2 id=expression-resolver-servicesexpressionspy>Expression Resolver (<code>services/expressions.py</code>)<a class=headerlink href=#expression-resolver-servicesexpressionspy title="Permanent link">¶</a></h2> <p>Before executing a component, the orchestrator resolves Jinja2 template expressions in <code>system_prompt</code> and <code>extra_config</code> values.</p> <h3 id=template-syntax>Template Syntax<a class=headerlink href=#template-syntax title="Permanent link">¶</a></h3> <div class="language-text highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>{{ nodeId.portName }}     -- Reference a specific node's output port
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>{{ trigger.text }}        -- The trigger's text input
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a>{{ trigger.payload }}     -- The trigger's full payload
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>{{ trigger.payload.key }} -- A specific key from the trigger payload
</span></code></pre></div> <h3 id=context-variables>Context Variables<a class=headerlink href=#context-variables title="Permanent link">¶</a></h3> <p>The expression context includes:</p> <table> <thead> <tr> <th>Variable</th> <th>Source</th> <th>Example</th> </tr> </thead> <tbody> <tr> <td><code>&lt;node_id&gt;</code></td> <td><code>node_outputs[node_id]</code></td> <td><code>{{ agent_abc.output }}</code></td> </tr> <tr> <td><code>trigger</code></td> <td>The trigger that fired this execution</td> <td><code>{{ trigger.text }}</code></td> </tr> </tbody> </table> <p>The <code>trigger</code> shorthand always refers to whichever trigger fired the current execution, which is useful in multi-trigger workflows where chat and Telegram triggers feed the same downstream nodes.</p> <h3 id=jinja2-features>Jinja2 Features<a class=headerlink href=#jinja2-features title="Permanent link">¶</a></h3> <ul> <li>Standard filters are supported: <code>{{ trigger.text | upper }}</code></li> <li>Undefined variables gracefully fall back to the original template string (no errors)</li> <li>Nested access works: <code>{{ node.output.nested.key }}</code></li> </ul> <h3 id=frontend-integration>Frontend Integration<a class=headerlink href=#frontend-integration title="Permanent link">¶</a></h3> <p>The frontend provides an <code>ExpressionTextarea</code> component with a <code>{ }</code> button that opens a <code>VariablePicker</code> popover. The picker performs BFS over upstream nodes and presents clickable <code>{{ nodeId.port }}</code> items for insertion.</p> <h2 id=executor-servicesexecutorpy>Executor (<code>services/executor.py</code>)<a class=headerlink href=#executor-servicesexecutorpy title="Permanent link">¶</a></h2> <p>The executor is the top-level wrapper around the orchestrator, responsible for:</p> <ol> <li><strong>Job setup</strong> -- Loading the workflow, execution, and related data from the database</li> <li><strong>Graph building</strong> -- Calling the builder to compile the LangGraph graph</li> <li><strong>Execution dispatch</strong> -- Calling the orchestrator to execute the graph</li> <li><strong>Finalization</strong> -- Updating the execution status, persisting costs, and broadcasting completion events</li> <li><strong>Cleanup</strong> -- Removing execution state from Redis</li> </ol> <h3 id=rq-job-wrappers>RQ Job Wrappers<a class=headerlink href=#rq-job-wrappers title="Permanent link">¶</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=k>def</span><span class=w> </span><span class=nf>execute_workflow_job</span><span class=p>(</span><span class=n>execution_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>    </span><span class=sd>"""RQ job entry point for full workflow execution."""</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=k>def</span><span class=w> </span><span class=nf>execute_node_job</span><span class=p>(</span><span class=n>execution_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>,</span> <span class=n>node_id</span><span class=p>:</span> <span class=nb>str</span><span class=p>):</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>    </span><span class=sd>"""RQ job entry point for single-node re-invocation</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=sd>    (used after subworkflow completion)."""</span>
</span></code></pre></div> <h2 id=state-model-servicesstatepy>State Model (<code>services/state.py</code>)<a class=headerlink href=#state-model-servicesstatepy title="Permanent link">¶</a></h2> <p>The workflow state extends LangGraph's <code>MessagesState</code>:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=k>class</span><span class=w> </span><span class=nc>WorkflowState</span><span class=p>(</span><span class=n>MessagesState</span><span class=p>):</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>    </span><span class=sd>"""Global state passed through the LangGraph execution."""</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a>    <span class=n>messages</span><span class=p>:</span> <span class=n>Annotated</span><span class=p>[</span><span class=nb>list</span><span class=p>[</span><span class=n>AnyMessage</span><span class=p>],</span> <span class=n>add_messages</span><span class=p>]</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>    <span class=n>node_outputs</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>dict</span><span class=p>]</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>    <span class=n>node_results</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>NodeResult</span><span class=p>]</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a>    <span class=n>route</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>    <span class=n>execution_id</span><span class=p>:</span> <span class=nb>str</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a>    <span class=n>user_context</span><span class=p>:</span> <span class=nb>dict</span>
</span></code></pre></div> <p>The <code>messages</code> field uses LangGraph's <code>add_messages</code> reducer, which handles deduplication via stable message IDs. This is critical for conversation memory where the system prompt is re-injected on each invocation.</p> <h2 id=component-output-convention>Component Output Convention<a class=headerlink href=#component-output-convention title="Permanent link">¶</a></h2> <p>Components return flat dicts with their port values:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># Simple component</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=k>return</span> <span class=p>{</span><span class=s2>"output"</span><span class=p>:</span> <span class=s2>"processed text"</span><span class=p>}</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=c1># Multi-port component</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=k>return</span> <span class=p>{</span><span class=s2>"category"</span><span class=p>:</span> <span class=s2>"spam"</span><span class=p>,</span> <span class=s2>"raw"</span><span class=p>:</span> <span class=s2>"original text"</span><span class=p>,</span> <span class=s2>"confidence"</span><span class=p>:</span> <span class=mf>0.95</span><span class=p>}</span>
</span></code></pre></div> <p>The orchestrator automatically wraps all non-underscore keys into <code>node_outputs[node_id]</code>.</p> <h3 id=reserved-underscore-keys>Reserved Underscore Keys<a class=headerlink href=#reserved-underscore-keys title="Permanent link">¶</a></h3> <table> <thead> <tr> <th>Key</th> <th>Effect</th> </tr> </thead> <tbody> <tr> <td><code>_route</code></td> <td>Sets <code>state["route"]</code> for conditional edge routing</td> </tr> <tr> <td><code>_messages</code></td> <td>Appended to <code>state["messages"]</code> (LangGraph message list)</td> </tr> <tr> <td><code>_state_patch</code></td> <td>Dict merged into global state (excluding protected keys)</td> </tr> <tr> <td><code>_subworkflow</code></td> <td>Signals subworkflow delegation to orchestrator</td> </tr> <tr> <td><code>_token_usage</code></td> <td>Token usage data accumulated by orchestrator for cost tracking</td> </tr> </tbody> </table> <p>Components no longer receive or use their own <code>node_id</code>. Legacy format (returning <code>node_outputs</code> directly) is still supported for backwards compatibility.</p> <h2 id=conditional-routing>Conditional Routing<a class=headerlink href=#conditional-routing title="Permanent link">¶</a></h2> <h3 id=switch-node>Switch Node<a class=headerlink href=#switch-node title="Permanent link">¶</a></h3> <p>The <code>switch</code> node evaluates rules against input data and emits a <code>_route</code> value:</p> <div class="language-python highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=n>rules</span> <span class=o>=</span> <span class=p>[</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a>    <span class=p>{</span><span class=s2>"field"</span><span class=p>:</span> <span class=s2>"trigger.payload.type"</span><span class=p>,</span> <span class=s2>"operator"</span><span class=p>:</span> <span class=s2>"equals"</span><span class=p>,</span> <span class=s2>"value"</span><span class=p>:</span> <span class=s2>"urgent"</span><span class=p>,</span> <span class=s2>"route"</span><span class=p>:</span> <span class=s2>"fast_path"</span><span class=p>},</span>
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>    <span class=p>{</span><span class=s2>"field"</span><span class=p>:</span> <span class=s2>"trigger.payload.type"</span><span class=p>,</span> <span class=s2>"operator"</span><span class=p>:</span> <span class=s2>"equals"</span><span class=p>,</span> <span class=s2>"value"</span><span class=p>:</span> <span class=s2>"normal"</span><span class=p>,</span> <span class=s2>"route"</span><span class=p>:</span> <span class=s2>"standard"</span><span class=p>},</span>
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=p>]</span>
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=c1># Falls back to "default" route if no rules match</span>
</span></code></pre></div> <h3 id=per-edge-condition-values>Per-Edge Condition Values<a class=headerlink href=#per-edge-condition-values title="Permanent link">¶</a></h3> <p>Each conditional edge carries a <code>condition_value</code> string. The orchestrator matches <code>state["route"]</code> against each outgoing edge's <code>condition_value</code> to determine the next node:</p> <pre class=mermaid><code>graph LR
    Switch[switch] --&gt;|condition_value="fast_path"| Agent1[urgent_agent]
    Switch --&gt;|condition_value="standard"| Agent2[normal_agent]
    Switch --&gt;|condition_value="default"| Log[logger]</code></pre> <p>Only <code>switch</code> nodes can originate conditional edges. This is enforced by the edge creation API.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.instant", "navigation.instant.prefetch", "navigation.top", "search.suggest", "search.highlight", "content.code.copy", "content.code.annotate", "content.tabs.link", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> <script id=init-glightbox>const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>